// main.js - replace with this updated version
document.addEventListener('DOMContentLoaded', function() {
    // Load JSON data from URL or use embedded data
        var data = '[{"id":"35067484","externalID":"237772127","provider":"one2one","brandName":"Nike SB","name":"NIKE SB Zoom Stefan Janoski Canvas Mens Shoes","description":"Nike SB Zoom Stefan Janoski shoes. Canvas upper with Nike SB swoosh embroidery at sides. Nike SB Zoom for low-profile cushioning and lightweight performance. Autoclave construction fuses the outsole to the upper for a classic streamlined look and feel. One-piece heel to midfoot overlay for streamlined support. Rubber outsole with herringbone traction pattern for durability, superior grip and easy change of direction. Imported.","price":"","listPrice":"84.99","stock":"1","currencyCode":"","image":"http:\/\/www.tillys.com\/tillys\/images\/catalog\/medium\/237772127.jpg","images":{"thumb":"http:\/\/www.tillys.com\/tillys\/images\/catalog\/medium\/237772127.jpg","large":"http:\/\/www.tillys.com\/tillys\/images\/catalog\/medium\/237772127.jpg","regular":"http:\/\/www.tillys.com\/tillys\/images\/catalog\/medium\/237772127.jpg"},"linkout":"http:\/\/www.dpbolvw.net\/click-7506471-10462774?url=http%3A%2F%2Fwww.tillys.com%2Ftillys%2Fvariants.aspx%3Fprod%3D237772127%26cid%3D1024%26ctlg%3D010_Guys%26source%3D15%26aref%3Dcj","link":"http:\/\/www.dpbolvw.net\/click-7506471-10462774?url=http%3A%2F%2Fwww.tillys.com%2Ftillys%2Fvariants.aspx%3Fprod%3D237772127%26cid%3D1024%26ctlg%3D010_Guys%26source%3D15%26aref%3Dcj","category":"3","reviews":{"title":"Review Title","date":"M\/D\/YYYY","comment":"Review Comment"},"debug":{"image":"https:\/\/s3.amazonaws.com\/slyce\/one2one\/542de2b9b579a.jpg"}},{"id":"35067488","externalID":"237779750","provider":"one2one","brandName":"Nike SB","name":"NIKE SB Zoom Stefan Janoski Mens Shoes","description":"Nike SB Zoom Stefan Janoski shoes. Suede upper with Nike SB swoosh embroidery at sides. Nike SB Zoom for low-profile cushioning and lightweight performance. Autoclave construction fuses the outsole to the upper for a classic streamlined look and feel. One-piece heel to midfoot overlay for streamlined support. Rubber outsole with herringbone traction pattern for durability, superior grip and easy change of direction. Imported.","price":"","listPrice":"89.99","stock":"1","currencyCode":"","image":"http:\/\/www.tillys.com\/tillys\/images\/catalog\/medium\/237779750.jpg","images":{"thumb":"http:\/\/www.tillys.com\/tillys\/images\/catalog\/medium\/237779750.jpg","large":"http:\/\/www.tillys.com\/tillys\/images\/catalog\/medium\/237779750.jpg","regular":"http:\/\/www.tillys.com\/tillys\/images\/catalog\/medium\/237779750.jpg"},"linkout":"http:\/\/www.jdoqocy.com\/click-7506471-10462774?url=http%3A%2F%2Fwww.tillys.com%2Ftillys%2Fvariants.aspx%3Fprod%3D237779750%26cid%3D1024%26ctlg%3D010_Guys%26source%3D15%26aref%3Dcj","link":"http:\/\/www.jdoqocy.com\/click-7506471-10462774?url=http%3A%2F%2Fwww.tillys.com%2Ftillys%2Fvariants.aspx%3Fprod%3D237779750%26cid%3D1024%26ctlg%3D010_Guys%26source%3D15%26aref%3Dcj","category":"3","reviews":{"title":"Review Title","date":"M\/D\/YYYY","comment":"Review Comment"}},{"id":"34309180","externalID":"216723129","provider":"one2one","brandName":"Tillys","name":"NIKE Zoom Stefan Janoski Mens Shoes","description":"Nike Zoom Stefan Janoski shoes. Canvas upper with Nike swoosh embroidery at sides. Nike Zoom for low-profile cushioning and lightweight performance. Autoclave construction fuses the outsole to the upper for a classic streamlined look and feel. One-piece heel to midfoot overlay for streamlined support. Rubber outsole with herringbone traction pattern for durability, superior grip and easy change of direction. Imported.","price":"","listPrice":"79.99","stock":"1","currencyCode":"","image":"http:\/\/www.tillys.com\/tillys\/images\/catalog\/medium\/216723129.jpg","images":{"thumb":"http:\/\/www.tillys.com\/tillys\/images\/catalog\/medium\/216723129.jpg","large":"http:\/\/www.tillys.com\/tillys\/images\/catalog\/medium\/216723129.jpg","regular":"http:\/\/www.tillys.com\/tillys\/images\/catalog\/medium\/216723129.jpg"},"linkout":"http:\/\/www.kqzyfj.com\/click-7506471-10462774?url=http%3A%2F%2Fwww.tillys.com%2Ftillys%2Fvariants.aspx%3Fprod%3D216723129%26cid%3D1024%26ctlg%3D010_Guys%26source%3D15%26aref%3Dcj","link":"http:\/\/www.kqzyfj.com\/click-7506471-10462774?url=http%3A%2F%2Fwww.tillys.com%2Ftillys%2Fvariants.aspx%3Fprod%3D216723129%26cid%3D1024%26ctlg%3D010_Guys%26source%3D15%26aref%3Dcj","category":"3","reviews":{"title":"Review Title","date":"M\/D\/YYYY","comment":"Review Comment"}},{"id":"34311526","externalID":"227698400","provider":"one2one","brandName":"Tillys","name":"NIKE Zoom Stefan Janoski Mens Shoes","description":"Nike Zoom Stefan Janoski shoes. Suede upper with Nike swoosh embroidery at sides. Nike Zoom for low-profile cushioning and lightweight performance. Autoclave construction fuses the outsole to the upper for a classic streamlined look and feel. One-piece heel to midfoot overlay for streamlined support. Rubber outsole with herringbone traction pattern for durability, superior grip and easy change of direction. Imported.","price":"","listPrice":"79.99","stock":"1","currencyCode":"","image":"http:\/\/www.tillys.com\/tillys\/images\/catalog\/medium\/227698400.jpg","images":{"thumb":"http:\/\/www.tillys.com\/tillys\/images\/catalog\/medium\/227698400.jpg","large":"http:\/\/www.tillys.com\/tillys\/images\/catalog\/medium\/227698400.jpg","regular":"http:\/\/www.tillys.com\/tillys\/images\/catalog\/medium\/227698400.jpg"},"linkout":"http:\/\/www.dpbolvw.net\/click-7506471-10462774?url=http%3A%2F%2Fwww.tillys.com%2Ftillys%2Fvariants.aspx%3Fprod%3D227698400%26cid%3D1024%26ctlg%3D010_Guys%26source%3D15%26aref%3Dcj","link":"http:\/\/www.dpbolvw.net\/click-7506471-10462774?url=http%3A%2F%2Fwww.tillys.com%2Ftillys%2Fvariants.aspx%3Fprod%3D227698400%26cid%3D1024%26ctlg%3D010_Guys%26source%3D15%26aref%3Dcj","category":"3","reviews":{"title":"Review Title","date":"M\/D\/YYYY","comment":"Review Comment"}},{"id":"34313276","externalID":"230673115","provider":"one2one","brandName":"Tillys","name":"NIKE Zoom Stefan Janoski Mens Shoes","description":"Nike Zoom Stefan Janoski shoes. Canvas upper with Nike swoosh embroidery at sides. Nike Zoom for low-profile cushioning and lightweight performance. Autoclave construction fuses the outsole to the upper for a classic streamlined look and feel. One-piece heel to midfoot overlay for streamlined support. Rubber outsole with herringbone traction pattern for durability, superior grip and easy change of direction. Imported.","price":"","listPrice":"79.99","stock":"1","currencyCode":"","image":"http:\/\/www.tillys.com\/tillys\/images\/catalog\/medium\/230673115.jpg","images":{"thumb":"http:\/\/www.tillys.com\/tillys\/images\/catalog\/medium\/230673115.jpg","large":"http:\/\/www.tillys.com\/tillys\/images\/catalog\/medium\/230673115.jpg","regular":"http:\/\/www.tillys.com\/tillys\/images\/catalog\/medium\/230673115.jpg"},"linkout":"http:\/\/www.anrdoezrs.net\/click-7506471-10462774?url=http%3A%2F%2Fwww.tillys.com%2Ftillys%2Fvariants.aspx%3Fprod%3D230673115%26cid%3D1024%26ctlg%3D010_Guys%26source%3D15%26aref%3Dcj","link":"http:\/\/www.anrdoezrs.net\/click-7506471-10462774?url=http%3A%2F%2Fwww.tillys.com%2Ftillys%2Fvariants.aspx%3Fprod%3D230673115%26cid%3D1024%26ctlg%3D010_Guys%26source%3D15%26aref%3Dcj","category":"3","reviews":{"title":"Review Title","date":"M\/D\/YYYY","comment":"Review Comment"}},{"id":"35066394","externalID":"232104150","provider":"one2one","brandName":"Nike SB","name":"NIKE SB Zoom Stefan Janoski Mens Shoes","description":"Nike SB Zoom Stefan Janoski shoes. Canvas upper with Nike SB swoosh embroidery at sides. Nike SB Zoom for low-profile cushioning and lightweight performance. Autoclave construction fuses the outsole to the upper for a classic streamlined look and feel. One-piece heel to midfoot overlay for streamlined support. Rubber outsole with herringbone traction pattern for durability, superior grip and easy change of direction. Imported.","price":"","listPrice":"79.99","stock":"1","currencyCode":"","image":"http:\/\/www.tillys.com\/tillys\/images\/catalog\/medium\/232104150.jpg","images":{"thumb":"http:\/\/www.tillys.com\/tillys\/images\/catalog\/medium\/232104150.jpg","large":"http:\/\/www.tillys.com\/tillys\/images\/catalog\/medium\/232104150.jpg","regular":"http:\/\/www.tillys.com\/tillys\/images\/catalog\/medium\/232104150.jpg"},"linkout":"http:\/\/www.tkqlhce.com\/click-7506471-10462774?url=http%3A%2F%2Fwww.tillys.com%2Ftillys%2Fvariants.aspx%3Fprod%3D232104150%26cid%3D1024%26ctlg%3D010_Guys%26source%3D15%26aref%3Dcj","link":"http:\/\/www.tkqlhce.com\/click-7506471-10462774?url=http%3A%2F%2Fwww.tillys.com%2Ftillys%2Fvariants.aspx%3Fprod%3D232104150%26cid%3D1024%26ctlg%3D010_Guys%26source%3D15%26aref%3Dcj","category":"3","reviews":{"title":"Review Title","date":"M\/D\/YYYY","comment":"Review Comment"}},{"id":"34314209","externalID":"232110300","provider":"one2one","brandName":"Tillys","name":"NIKE Zoom Stefan Janoski Canvas Mens Shoes","description":"Nike Zoom Stefan Janoski shoes. Canvas upper with Nike swoosh embroidery at sides. Nike Zoom for low-profile cushioning and lightweight performance. Autoclave construction fuses the outsole to the upper for a classic streamlined look and feel. One-piece heel to midfoot overlay for streamlined support. Rubber outsole with herringbone traction pattern for durability, superior grip and easy change of direction. Imported.","price":"","listPrice":"79.99","stock":"1","currencyCode":"","image":"http:\/\/www.tillys.com\/tillys\/images\/catalog\/medium\/232110300.jpg","images":{"thumb":"http:\/\/www.tillys.com\/tillys\/images\/catalog\/medium\/232110300.jpg","large":"http:\/\/www.tillys.com\/tillys\/images\/catalog\/medium\/232110300.jpg","regular":"http:\/\/www.tillys.com\/tillys\/images\/catalog\/medium\/232110300.jpg"},"linkout":"http:\/\/www.dpbolvw.net\/click-7506471-10462774?url=http%3A%2F%2Fwww.tillys.com%2Ftillys%2Fvariants.aspx%3Fprod%3D232110300%26cid%3D1024%26ctlg%3D010_Guys%26source%3D15%26aref%3Dcj","link":"http:\/\/www.dpbolvw.net\/click-7506471-10462774?url=http%3A%2F%2Fwww.tillys.com%2Ftillys%2Fvariants.aspx%3Fprod%3D232110300%26cid%3D1024%26ctlg%3D010_Guys%26source%3D15%26aref%3Dcj","category":"3","reviews":{"title":"Review Title","date":"M\/D\/YYYY","comment":"Review Comment"}},{"id":"35067487","externalID":"237778125","provider":"one2one","brandName":"Nike SB","name":"NIKE SB Zoom Stefan Janoski Premium SE Mens Shoes","description":"Nike SB Zoom Stefan Janoski Premium SE shoes. Suede upper with Nike SB swoosh screened at sides. Nike SB Zoom for low-profile cushioning and lightweight performance. Autoclave construction fuses the outsole to the upper for a classic streamlined look and feel. One-piece heel to midfoot overlay for streamlined support. Rubber outsole with herringbone traction pattern for durability, superior grip and easy change of direction. Imported.","price":"","listPrice":"89.99","stock":"1","currencyCode":"","image":"http:\/\/www.tillys.com\/tillys\/images\/catalog\/medium\/237778125.jpg","images":{"thumb":"http:\/\/www.tillys.com\/tillys\/images\/catalog\/medium\/237778125.jpg","large":"http:\/\/www.tillys.com\/tillys\/images\/catalog\/medium\/237778125.jpg","regular":"http:\/\/www.tillys.com\/tillys\/images\/catalog\/medium\/237778125.jpg"},"linkout":"http:\/\/www.jdoqocy.com\/click-7506471-10462774?url=http%3A%2F%2Fwww.tillys.com%2Ftillys%2Fvariants.aspx%3Fprod%3D237778125%26cid%3D1024%26ctlg%3D010_Guys%26source%3D15%26aref%3Dcj","link":"http:\/\/www.jdoqocy.com\/click-7506471-10462774?url=http%3A%2F%2Fwww.tillys.com%2Ftillys%2Fvariants.aspx%3Fprod%3D237778125%26cid%3D1024%26ctlg%3D010_Guys%26source%3D15%26aref%3Dcj","category":"3","reviews":{"title":"Review Title","date":"M\/D\/YYYY","comment":"Review Comment"}},{"id":"35067485","externalID":"237776127","provider":"one2one","brandName":"Nike SB","name":"NIKE SB Zoom Stefan Janoski Leather Mens Shoes","description":"Nike SB Zoom Stefan Janoski Leather shoes. Leather upper for comfort and superior durability. Flexible vulcanised construction with tacky gum rubber outsole for traction and durability. Herringbone pattern at outsole for grip and traction. Suede collar lining for comfort. Honeycomb construction for comfort. Cork footbed for comfort. Imported.","price":"","listPrice":"89.99","stock":"1","currencyCode":"","image":"http:\/\/www.tillys.com\/tillys\/images\/catalog\/medium\/237776127.jpg","images":{"thumb":"http:\/\/www.tillys.com\/tillys\/images\/catalog\/medium\/237776127.jpg","large":"http:\/\/www.tillys.com\/tillys\/images\/catalog\/medium\/237776127.jpg","regular":"http:\/\/www.tillys.com\/tillys\/images\/catalog\/medium\/237776127.jpg"},"linkout":"http:\/\/www.anrdoezrs.net\/click-7506471-10462774?url=http%3A%2F%2Fwww.tillys.com%2Ftillys%2Fvariants.aspx%3Fprod%3D237776127%26cid%3D1024%26ctlg%3D010_Guys%26source%3D15%26aref%3Dcj","link":"http:\/\/www.anrdoezrs.net\/click-7506471-10462774?url=http%3A%2F%2Fwww.tillys.com%2Ftillys%2Fvariants.aspx%3Fprod%3D237776127%26cid%3D1024%26ctlg%3D010_Guys%26source%3D15%26aref%3Dcj","category":"3","reviews":{"title":"Review Title","date":"M\/D\/YYYY","comment":"Review Comment"}},{"id":"35067490","externalID":"237781210","provider":"one2one","brandName":"Nike SB","name":"NIKE SB Braata LR Canvas Mens Shoes","description":"Nike SB Brataa LR Canvas shoes. Canvas upper for comfort and support. Seam-free sockliner and insole for superb comfort. Nike SB Free-inspired pods for more natural movement and an extraordinary feel. Elastic gusseted tongue lets you wear the shoe like a slip-on when laces are removed. Rubber outsole. Imported.","price":"","listPrice":"69.99","stock":"1","currencyCode":"","image":"http:\/\/www.tillys.com\/tillys\/images\/catalog\/medium\/237781210.jpg","images":{"thumb":"http:\/\/www.tillys.com\/tillys\/images\/catalog\/medium\/237781210.jpg","large":"http:\/\/www.tillys.com\/tillys\/images\/catalog\/medium\/237781210.jpg","regular":"http:\/\/www.tillys.com\/tillys\/images\/catalog\/medium\/237781210.jpg"},"linkout":"http:\/\/www.kqzyfj.com\/click-7506471-10462774?url=http%3A%2F%2Fwww.tillys.com%2Ftillys%2Fvariants.aspx%3Fprod%3D237781210%26cid%3D1024%26ctlg%3D010_Guys%26source%3D15%26aref%3Dcj","link":"http:\/\/www.kqzyfj.com\/click-7506471-10462774?url=http%3A%2F%2Fwww.tillys.com%2Ftillys%2Fvariants.aspx%3Fprod%3D237781210%26cid%3D1024%26ctlg%3D010_Guys%26source%3D15%26aref%3Dcj","category":"3","reviews":{"title":"Review Title","date":"M\/D\/YYYY","comment":"Review Comment"}},{"id":"35067491","externalID":"237783100","provider":"one2one","brandName":"Nike SB","name":"NIKE SB Braata LR Canvas Mens Shoes","description":"Nike SB Brataa LR Canvas shoes. Canvas upper for comfort and support. Seam-free sockliner and insole for superb comfort. Nike SB Free-inspired pods for more natural movement and an extraordinary feel. Elastic gusseted tongue lets you wear the shoe like a slip-on when laces are removed. Rubber outsole. Imported.","price":"","listPrice":"69.99","stock":"1","currencyCode":"","image":"http:\/\/www.tillys.com\/tillys\/images\/catalog\/medium\/237783100.jpg","images":{"thumb":"http:\/\/www.tillys.com\/tillys\/images\/catalog\/medium\/237783100.jpg","large":"http:\/\/www.tillys.com\/tillys\/images\/catalog\/medium\/237783100.jpg","regular":"http:\/\/www.tillys.com\/tillys\/images\/catalog\/medium\/237783100.jpg"},"linkout":"http:\/\/www.kqzyfj.com\/click-7506471-10462774?url=http%3A%2F%2Fwww.tillys.com%2Ftillys%2Fvariants.aspx%3Fprod%3D237783100%26cid%3D1024%26ctlg%3D010_Guys%26source%3D15%26aref%3Dcj","link":"http:\/\/www.kqzyfj.com\/click-7506471-10462774?url=http%3A%2F%2Fwww.tillys.com%2Ftillys%2Fvariants.aspx%3Fprod%3D237783100%26cid%3D1024%26ctlg%3D010_Guys%26source%3D15%26aref%3Dcj","category":"3","reviews":{"title":"Review Title","date":"M\/D\/YYYY","comment":"Review Comment"}},{"id":"34307930","externalID":"185886125","provider":"one2one","brandName":"Tillys","name":"NIKE Braata Canvas Mens Shoes","description":"Nike Braata shoes. Lightweight. Textile upper. Tonal stitching. Contrast Nike swoosh embroidery at rear quarter panel. Nike tongue label. Padded collar. Rubber outsole with heavy tread. Imported.","price":"","listPrice":"64.99","stock":"1","currencyCode":"","image":"http:\/\/www.tillys.com\/tillys\/images\/catalog\/medium\/185886125.jpg","images":{"thumb":"http:\/\/www.tillys.com\/tillys\/images\/catalog\/medium\/185886125.jpg","large":"http:\/\/www.tillys.com\/tillys\/images\/catalog\/medium\/185886125.jpg","regular":"http:\/\/www.tillys.com\/tillys\/images\/catalog\/medium\/185886125.jpg"},"linkout":"http:\/\/www.tkqlhce.com\/click-7506471-10462774?url=http%3A%2F%2Fwww.tillys.com%2Ftillys%2Fvariants.aspx%3Fprod%3D185886125%26cid%3D1024%26ctlg%3D010_Guys%26source%3D15%26aref%3Dcj","link":"http:\/\/www.tkqlhce.com\/click-7506471-10462774?url=http%3A%2F%2Fwww.tillys.com%2Ftillys%2Fvariants.aspx%3Fprod%3D185886125%26cid%3D1024%26ctlg%3D010_Guys%26source%3D15%26aref%3Dcj","category":"3","reviews":{"title":"Review Title","date":"M\/D\/YYYY","comment":"Review Comment"}},{"id":"34307929","externalID":"185872110","provider":"one2one","brandName":"Tillys","name":"NIKE Braata Canvas Mens Shoes","description":"Nike Braata shoes. Lightweight. Textile upper. Tonal stitching. Contrast Nike swoosh embroidery at rear quarter panel. Nike tongue label. Padded collar. Rubber outsole with heavy tread. Imported.","price":"","listPrice":"64.99","stock":"1","currencyCode":"","image":"http:\/\/www.tillys.com\/tillys\/images\/catalog\/medium\/185872110.jpg","images":{"thumb":"http:\/\/www.tillys.com\/tillys\/images\/catalog\/medium\/185872110.jpg","large":"http:\/\/www.tillys.com\/tillys\/images\/catalog\/medium\/185872110.jpg","regular":"http:\/\/www.tillys.com\/tillys\/images\/catalog\/medium\/185872110.jpg"},"linkout":"http:\/\/www.anrdoezrs.net\/click-7506471-10462774?url=http%3A%2F%2Fwww.tillys.com%2Ftillys%2Fvariants.aspx%3Fprod%3D185872110%26cid%3D1024%26ctlg%3D010_Guys%26source%3D15%26aref%3Dcj","link":"http:\/\/www.anrdoezrs.net\/click-7506471-10462774?url=http%3A%2F%2Fwww.tillys.com%2Ftillys%2Fvariants.aspx%3Fprod%3D185872110%26cid%3D1024%26ctlg%3D010_Guys%26source%3D15%26aref%3Dcj","category":"3","reviews":{"title":"Review Title","date":"M\/D\/YYYY","comment":"Review Comment"}},{"id":"34313273","externalID":"230670131","provider":"one2one","brandName":"Tillys","name":"NIKE Braata LR Canvas Mens Shoes","description":"Nike Brataa LR Canvas shoes. Canvas upper for comfort and support. Seam-free sockliner and insole for superb comfort. Nike Free-inspired pods for more natural movement and an extraordinary feel. Elastic gusseted tongue lets you wear the shoe like a slip-on when laces are removed. Rubber outsole. Imported.","price":"","listPrice":"64.99","stock":"1","currencyCode":"","image":"http:\/\/www.tillys.com\/tillys\/images\/catalog\/medium\/230670131.jpg","images":{"thumb":"http:\/\/www.tillys.com\/tillys\/images\/catalog\/medium\/230670131.jpg","large":"http:\/\/www.tillys.com\/tillys\/images\/catalog\/medium\/230670131.jpg","regular":"http:\/\/www.tillys.com\/tillys\/images\/catalog\/medium\/230670131.jpg"},"linkout":"http:\/\/www.anrdoezrs.net\/click-7506471-10462774?url=http%3A%2F%2Fwww.tillys.com%2Ftillys%2Fvariants.aspx%3Fprod%3D230670131%26cid%3D1024%26ctlg%3D010_Guys%26source%3D15%26aref%3Dcj","link":"http:\/\/www.anrdoezrs.net\/click-7506471-10462774?url=http%3A%2F%2Fwww.tillys.com%2Ftillys%2Fvariants.aspx%3Fprod%3D230670131%26cid%3D1024%26ctlg%3D010_Guys%26source%3D15%26aref%3Dcj","category":"3","reviews":{"title":"Review Title","date":"M\/D\/YYYY","comment":"Review Comment"}},{"id":"34308494","externalID":"207697100","provider":"one2one","brandName":"Tillys","name":"NIKE Satire Canvas Mens Shoes","description":"Nike Satire Canvas shoes. Canvas upper with Nike swoosh embroidery at side. Nike logo tag on tag. Rubber outsole. Imported.","price":"","listPrice":"67.99","stock":"1","currencyCode":"","image":"http:\/\/www.tillys.com\/tillys\/images\/catalog\/medium\/207697100.jpg","images":{"thumb":"http:\/\/www.tillys.com\/tillys\/images\/catalog\/medium\/207697100.jpg","large":"http:\/\/www.tillys.com\/tillys\/images\/catalog\/medium\/207697100.jpg","regular":"http:\/\/www.tillys.com\/tillys\/images\/catalog\/medium\/207697100.jpg"},"linkout":"http:\/\/www.tkqlhce.com\/click-7506471-10462774?url=http%3A%2F%2Fwww.tillys.com%2Ftillys%2Fvariants.aspx%3Fprod%3D207697100%26cid%3D1024%26ctlg%3D010_Guys%26source%3D15%26aref%3Dcj","link":"http:\/\/www.tkqlhce.com\/click-7506471-10462774?url=http%3A%2F%2Fwww.tillys.com%2Ftillys%2Fvariants.aspx%3Fprod%3D207697100%26cid%3D1024%26ctlg%3D010_Guys%26source%3D15%26aref%3Dcj","category":"3","reviews":{"title":"Review Title","date":"M\/D\/YYYY","comment":"Review Comment"}},{"id":"35065758","externalID":"207693111","provider":"one2one","brandName":"Nike SB","name":"NIKE SB Satire Canvas Mens Shoes","description":"Nike SB Satire Canvas shoes. Canvas upper with Nike SB swoosh embroidery at side. Nike SB logo tag on tag. Rubber outsole. Imported.","price":"","listPrice":"67.99","stock":"1","currencyCode":"","image":"http:\/\/www.tillys.com\/tillys\/images\/catalog\/medium\/207693111.jpg","images":{"thumb":"http:\/\/www.tillys.com\/tillys\/images\/catalog\/medium\/207693111.jpg","large":"http:\/\/www.tillys.com\/tillys\/images\/catalog\/medium\/207693111.jpg","regular":"http:\/\/www.tillys.com\/tillys\/images\/catalog\/medium\/207693111.jpg"},"linkout":"http:\/\/www.anrdoezrs.net\/click-7506471-10462774?url=http%3A%2F%2Fwww.tillys.com%2Ftillys%2Fvariants.aspx%3Fprod%3D207693111%26cid%3D1024%26ctlg%3D010_Guys%26source%3D15%26aref%3Dcj","link":"http:\/\/www.anrdoezrs.net\/click-7506471-10462774?url=http%3A%2F%2Fwww.tillys.com%2Ftillys%2Fvariants.aspx%3Fprod%3D207693111%26cid%3D1024%26ctlg%3D010_Guys%26source%3D15%26aref%3Dcj","category":"3","reviews":{"title":"Review Title","date":"M\/D\/YYYY","comment":"Review Comment"}},{"id":"35446334","externalID":"237786178","provider":"one2one","brandName":"Nike SB","name":"NIKE SB Satire Mens Shoes","description":"Nike SB Satire shoes. Suede upper with canvas panel at back of heel. Autoclave construction fuses midsole and outsole for greater durability and a classic look. Rubber outsole with herringbone pattern for durability and excellent grip. Imported.","price":"","listPrice":"67.99","stock":"1","currencyCode":"","image":"http:\/\/www.tillys.com\/tillys\/images\/catalog\/medium\/237786178.jpg","images":{"thumb":"http:\/\/www.tillys.com\/tillys\/images\/catalog\/medium\/237786178.jpg","large":"http:\/\/www.tillys.com\/tillys\/images\/catalog\/medium\/237786178.jpg","regular":"http:\/\/www.tillys.com\/tillys\/images\/catalog\/medium\/237786178.jpg"},"linkout":"http:\/\/www.kqzyfj.com\/click-7506471-10462774?url=http%3A%2F%2Fwww.tillys.com%2Ftillys%2Fvariants.aspx%3Fprod%3D237786178%26cid%3D1024%26ctlg%3D010_Guys%26source%3D15%26aref%3Dcj","link":"http:\/\/www.kqzyfj.com\/click-7506471-10462774?url=http%3A%2F%2Fwww.tillys.com%2Ftillys%2Fvariants.aspx%3Fprod%3D237786178%26cid%3D1024%26ctlg%3D010_Guys%26source%3D15%26aref%3Dcj","category":"3","reviews":{"title":"Review Title","date":"M\/D\/YYYY","comment":"Review Comment"}},{"id":"35067493","externalID":"237789184","provider":"one2one","brandName":"Nike SB","name":"NIKE SB Paul Rodriguez 8 Mens Shoes","description":"Nike SB Paul Rodriguez 8 shoes. The Nike P-ROD 8 brings 360 degrees of Nike Lunarlon impact protection to the design, delivering lightweight, responsive cushioning plus the board feel that skaters need. The Hyperscreen+ traction layer amplifies durability, and the dynamic Nike Flywire cables are the ultimate solution for an adaptive fit. The P-ROD 8s outsole traction pattern was created to provide great grip during flicks and flips. Imported.","price":"","listPrice":"129.99","stock":"1","currencyCode":"","image":"http:\/\/www.tillys.com\/tillys\/images\/catalog\/medium\/237789184.jpg","images":{"thumb":"http:\/\/www.tillys.com\/tillys\/images\/catalog\/medium\/237789184.jpg","large":"http:\/\/www.tillys.com\/tillys\/images\/catalog\/medium\/237789184.jpg","regular":"http:\/\/www.tillys.com\/tillys\/images\/catalog\/medium\/237789184.jpg"},"linkout":"http:\/\/www.anrdoezrs.net\/click-7506471-10462774?url=http%3A%2F%2Fwww.tillys.com%2Ftillys%2Fvariants.aspx%3Fprod%3D237789184%26cid%3D1024%26ctlg%3D010_Guys%26source%3D15%26aref%3Dcj","link":"http:\/\/www.anrdoezrs.net\/click-7506471-10462774?url=http%3A%2F%2Fwww.tillys.com%2Ftillys%2Fvariants.aspx%3Fprod%3D237789184%26cid%3D1024%26ctlg%3D010_Guys%26source%3D15%26aref%3Dcj","category":"3","reviews":{"title":"Review Title","date":"M\/D\/YYYY","comment":"Review Comment"}},{"id":"35067494","externalID":"237791100","provider":"one2one","brandName":"Nike SB","name":"NIKE SB Paul Rodriguez Citadel Mens Shoes","description":"The Nike SB Paul Rodriguez Citadel Mens Shoe combines Flywire technology and Lunarlon foam for lightweight support and maximum impact protection. Synthetic upper for style and durability. Flat Flywire cables for a dynamic, supportive fit. Lunarlon sockliner and midsole for maximum impact protection. Rubber outsole with modified herringbone pattern for flexibility and traction. Imported.","price":"","listPrice":"99.99","stock":"1","currencyCode":"","image":"http:\/\/www.tillys.com\/tillys\/images\/catalog\/medium\/237791100.jpg","images":{"thumb":"http:\/\/www.tillys.com\/tillys\/images\/catalog\/medium\/237791100.jpg","large":"http:\/\/www.tillys.com\/tillys\/images\/catalog\/medium\/237791100.jpg","regular":"http:\/\/www.tillys.com\/tillys\/images\/catalog\/medium\/237791100.jpg"},"linkout":"http:\/\/www.anrdoezrs.net\/click-7506471-10462774?url=http%3A%2F%2Fwww.tillys.com%2Ftillys%2Fvariants.aspx%3Fprod%3D237791100%26cid%3D1024%26ctlg%3D010_Guys%26source%3D15%26aref%3Dcj","link":"http:\/\/www.anrdoezrs.net\/click-7506471-10462774?url=http%3A%2F%2Fwww.tillys.com%2Ftillys%2Fvariants.aspx%3Fprod%3D237791100%26cid%3D1024%26ctlg%3D010_Guys%26source%3D15%26aref%3Dcj","category":"3","reviews":{"title":"Review Title","date":"M\/D\/YYYY","comment":"Review Comment"}},{"id":"35067495","externalID":"237794125","provider":"one2one","brandName":"Nike SB","name":"NIKE SB Lunar One Shot Mens Shoes","description":"Nike SB Lunar One Shot shoes. Low-profile upper with tacky surface for durability and boardfeel. Cut-away heel panel with mesh lining for breathability and less bulk. Lunarlon midsole for springy, resilient cushioning. Flexible rubber outsole with herringbone traction pattern for optimal grip and natural range of motion. Imported.","price":"","listPrice":"114.99","stock":"1","currencyCode":"","image":"http:\/\/www.tillys.com\/tillys\/images\/catalog\/medium\/237794125.jpg","images":{"thumb":"http:\/\/www.tillys.com\/tillys\/images\/catalog\/medium\/237794125.jpg","large":"http:\/\/www.tillys.com\/tillys\/images\/catalog\/medium\/237794125.jpg","regular":"http:\/\/www.tillys.com\/tillys\/images\/catalog\/medium\/237794125.jpg"},"linkout":"http:\/\/www.dpbolvw.net\/click-7506471-10462774?url=http%3A%2F%2Fwww.tillys.com%2Ftillys%2Fvariants.aspx%3Fprod%3D237794125%26cid%3D1024%26ctlg%3D010_Guys%26source%3D15%26aref%3Dcj","link":"http:\/\/www.dpbolvw.net\/click-7506471-10462774?url=http%3A%2F%2Fwww.tillys.com%2Ftillys%2Fvariants.aspx%3Fprod%3D237794125%26cid%3D1024%26ctlg%3D010_Guys%26source%3D15%26aref%3Dcj","category":"3","reviews":{"title":"Review Title","date":"M\/D\/YYYY","comment":"Review Comment"}}]';
            // Define transformers for data formatting
            const options = {
                errorHandling: true,
                addDataAttributes: true,
                externalLinks: true,
                transformers: {
                    price: (value, item) => {
                        // Format price or use listPrice if price is empty
                        const priceToUse = value || item.listPrice;
                        return priceToUse ? `$${priceToUse}` : 'Price not available';
                    },
                    name: (value) => {
                        // Truncate long names
                        return value.length > 40 ? value.substring(0, 37) + '...' : value;
                    }
                },
                // Add event handlers
                events: {
                    item: {
                        click: (item) => {
                            console.log('Selected product:', item.name);
                            // Highlight selected product
                            document.querySelectorAll('.product').forEach(p => 
                                p.classList.remove('selected'));
                            event.currentTarget.classList.add('selected');
                        }
                    }
                },
                // Map additional attributes
                attributeMap: {
                    name: {
                        'data-brand': 'brandName',
                        'title': 'name'
                    }
                }
            };

            // Filter products if needed
            // options.filter = item => parseFloat(item.listPrice) < 80;

            // Render the products
            rivr(data, document.querySelector('.products'), options);
            
            // Setup search functionality
            const searchInput = document.getElementById('product-search');
            if (searchInput) {
                searchInput.addEventListener('input', (e) => {
                    const searchTerm = e.target.value.toLowerCase();
                    const filteredData = searchTerm ? 
                        data.filter(item => 
                            item.name.toLowerCase().includes(searchTerm) || 
                            item.description.toLowerCase().includes(searchTerm)
                        ) : data;
                    
                    // Re-render with filtered data
                    const productsContainer = document.querySelector('.products');
                    const template = productsContainer.cloneNode(true);
                    rivr(filteredData, template, options);
                    productsContainer.innerHTML = template.innerHTML;
                });
            }
            
            // Setup sorting
            const sortSelect = document.getElementById('product-sort');
            if (sortSelect) {
                sortSelect.addEventListener('change', (e) => {
                    const sortBy = e.target.value;
                    let sortedData = [...data];
                    
                    switch(sortBy) {
                        case 'price-asc':
                            sortedData.sort((a, b) => 
                                parseFloat(a.listPrice || 0) - parseFloat(b.listPrice || 0));
                            break;
                        case 'price-desc':
                            sortedData.sort((a, b) => 
                                parseFloat(b.listPrice || 0) - parseFloat(a.listPrice || 0));
                            break;
                        case 'name':
                            sortedData.sort((a, b) => a.name.localeCompare(b.name));
                            break;
                    }
                    
                    // Re-render with sorted data
                    const productsContainer = document.querySelector('.products');
                    const template = productsContainer.cloneNode(true);
                    rivr(sortedData, template, options);
                    productsContainer.innerHTML = template.innerHTML;
                });
            }
            
            // Make products visible
            document.querySelector('.products').style.display = 'grid';
        })
        .catch(error => {
            console.error('Failed to load products:', error);
            document.querySelector('.error-message').textContent = 
                'Unable to load products. Please try again later.';
        });
});
